import React, {useEffect, useState} from "react";
import { useForm } from "react-hook-form";

import moment from 'moment';

import {useDispatch, useSelector} from "react-redux";
import {userInfoActions, userUpdateActions} from "../../../actions";
import {UpdateUserView} from "./UpdateUserView";
import {BreadCrumbs} from "../../Repeatable/BreadCrumbs/BreadCrumbs";
import {Elements} from "@stripe/react-stripe-js";
import {CheckoutForm} from "../../Stripe/Stripe";
import {loadStripe} from "@stripe/stripe-js";
const stripePromise = loadStripe('pk_test_6pRNASCoBOKtIshFeQd4XMUh');

import formStyles from "../../../styles/form.styl";
import buttonStyles from "../../../styles/buttons.styl";
import localStyles from "./UpdateUser.styl";
import {Modal} from "../../Repeatable/Modal/Modal";

export const UpdateUser = (props) => {
  const { register, handleSubmit, errors, control } = useForm({
    mode: 'onSubmit',
    reValidateMode: 'onBlur',
    criteriaMode: "firstError"
  });
  const {history} = props;
  const [startDate] = useState(new Date());
  const [cardFormVisible, setCardFormVisible] = useState(false);
  const dispatch = useDispatch();
  const userId = props.match.params.id;
  const currentUserInfo = useSelector(state => state.userInfo?.data);
  const {success} = useSelector(state => state.userUpdate);
  const { card, firstName } = currentUserInfo;
  useEffect(() => {
    dispatch(userInfoActions.getInfo(userId));
  }, [dispatch])

  const onSubmit = async data => {
    const formData = {
      ...data,
      dateOfBirth: moment(data.dateOfBirth).format('DD/MM/yyyy'),
      phone: `+${data.phone}`,
      card: card || ''
    };
    await dispatch(userUpdateActions.update(formData, userId));
    await dispatch(userInfoActions.getInfo(userId));
  };

  const handleClickAddCard = () => {
    setCardFormVisible(!cardFormVisible)
  }

  return (
    <div className={formStyles.formWrap} >
      <BreadCrumbs currentPage='Update user' />
      <div className={localStyles.usersUpdateBackgroundWrap} >
        <svg className={localStyles.usersUpdateDotsLeft} width="505" height="330" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="7.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="7.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="7.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="7.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="7.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="7.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="7.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="7.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="7.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="7.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="42.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="42.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="42.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="42.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="42.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="42.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="42.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="42.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="42.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="42.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="77.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="77.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="77.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="77.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="77.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="77.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="77.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="77.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="77.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="77.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="112.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="112.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="112.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="112.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="112.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="112.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="112.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="112.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="112.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="112.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="147.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="147.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="147.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="147.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="147.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="147.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="147.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="147.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="147.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="147.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="182.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="182.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="182.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="182.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="182.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="182.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="182.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="182.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="182.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="182.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="217.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="217.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="217.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="217.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="217.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="217.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="217.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="217.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="217.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="217.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="252.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="252.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="252.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="252.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="252.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="252.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="252.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="252.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="252.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="252.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="287.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="287.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="287.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="287.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="287.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="287.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="287.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="287.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="287.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="287.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="322.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="322.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="322.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="322.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="322.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="322.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="322.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="322.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="322.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="322.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="357.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="357.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="357.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="357.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="357.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="357.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="357.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="357.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="357.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="357.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="392.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="392.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="392.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="392.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="392.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="392.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="392.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="392.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="392.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="392.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="427.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="427.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="427.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="427.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="427.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="427.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="427.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="427.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="427.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="427.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="462.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="462.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="462.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="462.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="462.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="462.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="462.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="462.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="462.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="462.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="497.5" cy="7.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="497.5" cy="42.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="497.5" cy="77.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="497.5" cy="112.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="497.5" cy="147.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="497.5" cy="182.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="497.5" cy="217.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="497.5" cy="252.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/><circle cx="497.5" cy="287.5" r="7.5" className={localStyles.usersUpdateIconsFillLight} /><circle cx="497.5" cy="322.5" r="7.5" className={localStyles.usersUpdateIconsFillLight}/></svg>
        <svg className={localStyles.usersUpdateDotsRight} width="331" height="506" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="8" cy="498" r="7.5" transform="rotate(-90 8 498)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="498" r="7.5" transform="rotate(-90 43 498)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="498" r="7.5" transform="rotate(-90 78 498)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="498" r="7.5" transform="rotate(-90 113 498)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="498" r="7.5" transform="rotate(-90 148 498)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="498" r="7.5" transform="rotate(-90 183 498)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="498" r="7.5" transform="rotate(-90 218 498)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="498" r="7.5" transform="rotate(-90 253 498)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="498" r="7.5" transform="rotate(-90 288 498)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="498" r="7.5" transform="rotate(-90 323 498)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="463" r="7.5" transform="rotate(-90 8 463)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="463" r="7.5" transform="rotate(-90 43 463)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="463" r="7.5" transform="rotate(-90 78 463)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="463" r="7.5" transform="rotate(-90 113 463)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="463" r="7.5" transform="rotate(-90 148 463)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="463" r="7.5" transform="rotate(-90 183 463)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="463" r="7.5" transform="rotate(-90 218 463)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="463" r="7.5" transform="rotate(-90 253 463)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="463" r="7.5" transform="rotate(-90 288 463)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="463" r="7.5" transform="rotate(-90 323 463)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="428" r="7.5" transform="rotate(-90 8 428)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="428" r="7.5" transform="rotate(-90 43 428)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="428" r="7.5" transform="rotate(-90 78 428)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="428" r="7.5" transform="rotate(-90 113 428)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="428" r="7.5" transform="rotate(-90 148 428)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="428" r="7.5" transform="rotate(-90 183 428)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="428" r="7.5" transform="rotate(-90 218 428)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="428" r="7.5" transform="rotate(-90 253 428)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="428" r="7.5" transform="rotate(-90 288 428)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="428" r="7.5" transform="rotate(-90 323 428)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="393" r="7.5" transform="rotate(-90 8 393)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="393" r="7.5" transform="rotate(-90 43 393)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="393" r="7.5" transform="rotate(-90 78 393)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="393" r="7.5" transform="rotate(-90 113 393)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="393" r="7.5" transform="rotate(-90 148 393)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="393" r="7.5" transform="rotate(-90 183 393)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="393" r="7.5" transform="rotate(-90 218 393)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="393" r="7.5" transform="rotate(-90 253 393)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="393" r="7.5" transform="rotate(-90 288 393)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="393" r="7.5" transform="rotate(-90 323 393)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="358" r="7.5" transform="rotate(-90 8 358)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="358" r="7.5" transform="rotate(-90 43 358)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="358" r="7.5" transform="rotate(-90 78 358)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="358" r="7.5" transform="rotate(-90 113 358)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="358" r="7.5" transform="rotate(-90 148 358)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="358" r="7.5" transform="rotate(-90 183 358)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="358" r="7.5" transform="rotate(-90 218 358)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="358" r="7.5" transform="rotate(-90 253 358)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="358" r="7.5" transform="rotate(-90 288 358)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="358" r="7.5" transform="rotate(-90 323 358)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="323" r="7.5" transform="rotate(-90 8 323)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="323" r="7.5" transform="rotate(-90 43 323)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="323" r="7.5" transform="rotate(-90 78 323)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="323" r="7.5" transform="rotate(-90 113 323)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="323" r="7.5" transform="rotate(-90 148 323)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="323" r="7.5" transform="rotate(-90 183 323)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="323" r="7.5" transform="rotate(-90 218 323)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="323" r="7.5" transform="rotate(-90 253 323)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="323" r="7.5" transform="rotate(-90 288 323)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="323" r="7.5" transform="rotate(-90 323 323)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="288" r="7.5" transform="rotate(-90 8 288)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="288" r="7.5" transform="rotate(-90 43 288)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="288" r="7.5" transform="rotate(-90 78 288)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="288" r="7.5" transform="rotate(-90 113 288)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="288" r="7.5" transform="rotate(-90 148 288)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="288" r="7.5" transform="rotate(-90 183 288)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="288" r="7.5" transform="rotate(-90 218 288)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="288" r="7.5" transform="rotate(-90 253 288)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="288" r="7.5" transform="rotate(-90 288 288)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="288" r="7.5" transform="rotate(-90 323 288)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="253" r="7.5" transform="rotate(-90 8 253)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="253" r="7.5" transform="rotate(-90 43 253)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="253" r="7.5" transform="rotate(-90 78 253)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="253" r="7.5" transform="rotate(-90 113 253)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="253" r="7.5" transform="rotate(-90 148 253)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="253" r="7.5" transform="rotate(-90 183 253)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="253" r="7.5" transform="rotate(-90 218 253)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="253" r="7.5" transform="rotate(-90 253 253)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="253" r="7.5" transform="rotate(-90 288 253)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="253" r="7.5" transform="rotate(-90 323 253)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="218" r="7.5" transform="rotate(-90 8 218)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="218" r="7.5" transform="rotate(-90 43 218)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="218" r="7.5" transform="rotate(-90 78 218)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="218" r="7.5" transform="rotate(-90 113 218)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="218" r="7.5" transform="rotate(-90 148 218)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="218" r="7.5" transform="rotate(-90 183 218)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="218" r="7.5" transform="rotate(-90 218 218)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="218" r="7.5" transform="rotate(-90 253 218)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="218" r="7.5" transform="rotate(-90 288 218)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="218" r="7.5" transform="rotate(-90 323 218)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="183" r="7.5" transform="rotate(-90 8 183)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="183" r="7.5" transform="rotate(-90 43 183)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="183" r="7.5" transform="rotate(-90 78 183)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="183" r="7.5" transform="rotate(-90 113 183)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="183" r="7.5" transform="rotate(-90 148 183)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="183" r="7.5" transform="rotate(-90 183 183)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="183" r="7.5" transform="rotate(-90 218 183)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="183" r="7.5" transform="rotate(-90 253 183)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="183" r="7.5" transform="rotate(-90 288 183)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="183" r="7.5" transform="rotate(-90 323 183)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="148" r="7.5" transform="rotate(-90 8 148)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="148" r="7.5" transform="rotate(-90 43 148)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="148" r="7.5" transform="rotate(-90 78 148)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="148" r="7.5" transform="rotate(-90 113 148)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="148" r="7.5" transform="rotate(-90 148 148)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="148" r="7.5" transform="rotate(-90 183 148)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="148" r="7.5" transform="rotate(-90 218 148)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="148" r="7.5" transform="rotate(-90 253 148)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="148" r="7.5" transform="rotate(-90 288 148)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="148" r="7.5" transform="rotate(-90 323 148)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="113" r="7.5" transform="rotate(-90 8 113)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="113" r="7.5" transform="rotate(-90 43 113)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="113" r="7.5" transform="rotate(-90 78 113)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="113" r="7.5" transform="rotate(-90 113 113)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="113" r="7.5" transform="rotate(-90 148 113)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="113" r="7.5" transform="rotate(-90 183 113)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="113" r="7.5" transform="rotate(-90 218 113)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="113" r="7.5" transform="rotate(-90 253 113)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="113" r="7.5" transform="rotate(-90 288 113)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="113" r="7.5" transform="rotate(-90 323 113)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="78" r="7.5" transform="rotate(-90 8 78)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="78" r="7.5" transform="rotate(-90 43 78)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="78" r="7.5" transform="rotate(-90 78 78)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="78" r="7.5" transform="rotate(-90 113 78)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="78" r="7.5" transform="rotate(-90 148 78)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="78" r="7.5" transform="rotate(-90 183 78)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="78" r="7.5" transform="rotate(-90 218 78)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="78" r="7.5" transform="rotate(-90 253 78)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="78" r="7.5" transform="rotate(-90 288 78)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="78" r="7.5" transform="rotate(-90 323 78)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="43" r="7.5" transform="rotate(-90 8 43)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="43" r="7.5" transform="rotate(-90 43 43)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="43" r="7.5" transform="rotate(-90 78 43)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="43" r="7.5" transform="rotate(-90 113 43)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="43" r="7.5" transform="rotate(-90 148 43)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="43" r="7.5" transform="rotate(-90 183 43)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="43" r="7.5" transform="rotate(-90 218 43)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="43" r="7.5" transform="rotate(-90 253 43)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="43" r="7.5" transform="rotate(-90 288 43)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="43" r="7.5" transform="rotate(-90 323 43)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="8" cy="8" r="7.5" transform="rotate(-90 8 8)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="43" cy="8" r="7.5" transform="rotate(-90 43 8)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="78" cy="8" r="7.5" transform="rotate(-90 78 8)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="113" cy="8" r="7.5" transform="rotate(-90 113 8)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="148" cy="8" r="7.5" transform="rotate(-90 148 8)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="183" cy="8" r="7.5" transform="rotate(-90 183 8)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="218" cy="8" r="7.5" transform="rotate(-90 218 8)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="253" cy="8" r="7.5" transform="rotate(-90 253 8)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="288" cy="8" r="7.5" transform="rotate(-90 288 8)" className={localStyles.usersUpdateIconsFillLight}/><circle cx="323" cy="8" r="7.5" transform="rotate(-90 323 8)" className={localStyles.usersUpdateIconsFillLight}/></svg>
        <svg className={localStyles.usersUpdateCircle} width="300" height="300" viewBox="0 0 300 300" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="150" cy="150" r="150" className={localStyles.usersUpdateIconsFillLight} /></svg>
        <svg className={localStyles.usersUpdateCircleSmall} width="100" height="100" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="50" className={localStyles.usersUpdateIconsFillLight}/></svg>
        <svg className={localStyles.usersUpdateRectangle} width="105" height="106" fill="none" xmlns="http://www.w3.org/2000/svg"><path className={localStyles.usersUpdateIconsFillLight} d="M.047 67.403L38.445.896l66.507 38.398L66.554 105.8z"/></svg>
      </div>
      <UpdateUserView
        handleSubmit={handleSubmit}
        onSubmit={onSubmit}
        errors={errors}
        control={control}
        register={register}
        startDate={startDate}
        currentUserInfo={currentUserInfo}
      />

      <div className={localStyles.cardRowWrap} >
        { card && card.length ? (
          <div>Your card last 4 numbers: {card}</div>
        ) : (
          <>
            <button
              type='button'
              onClick={handleClickAddCard}
            >{cardFormVisible ? 'Cancel' : 'Add new card'}</button>
            <div className={localStyles.cardRow} >
              { cardFormVisible &&
              <Elements stripe={stripePromise}>
                <CheckoutForm />
              </Elements>
              }
            </div>
          </>
        )}
      </div>
      { success &&
        <Modal history={history} userName={firstName} update={true} />
      }
    </div>
  );
}
